<div align="center">
  <img width="600" src="https://github.com/eWert-Online/OSnap/blob/7cdbcbde65529aac9db22a6fc113af2913d6a2a6/logo.png"/>
</div>

<h3 align="center"> The speedy and easy to use Snapshot Testing tool for your project! </h3>
<p align="center">
  A Project with around 1200 snapshots will run in under 3 minutes*, <br />
  compared to around 18 minutes it takes other popular snapshot tools to run the same test suite.
</p>
<div align="center">
  <i align="center">* with 20 parallel runners on a 2017 15-inch MacBook Pro.</i>
</div>
<br />
<div align="center">
    <img src="https://forthebadge.com/images/badges/built-with-love.svg" alt="<3">
    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTkuOTQiIGhlaWdodD0iMzUiIHZpZXdCb3g9IjAgMCAxOTkuOTQgMzUiPjxyZWN0IGNsYXNzPSJzdmdfX3JlY3QiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMTUuMzEiIGhlaWdodD0iMzUiIGZpbGw9IiNFRTZBMUEiLz48cmVjdCBjbGFzcz0ic3ZnX19yZWN0IiB4PSIxMTMuMzEiIHk9IjAiIHdpZHRoPSI4Ni42MyIgaGVpZ2h0PSIzNSIgZmlsbD0iI0RDNTQwMiIvPjxwYXRoIGNsYXNzPSJzdmdfX3RleHQiIGQ9Ik0xNS42OSAyMkwxNC4yMiAyMkwxNC4yMiAxMy40N0wxNi4xNCAxMy40N0wxOC42MCAyMC4wMUwyMS4wNiAxMy40N0wyMi45NyAxMy40N0wyMi45NyAyMkwyMS40OSAyMkwyMS40OSAxOS4xOUwyMS42NCAxNS40M0wxOS4xMiAyMkwxOC4wNiAyMkwxNS41NSAxNS40M0wxNS42OSAxOS4xOUwxNS42OSAyMlpNMjguNDkgMjJMMjYuOTUgMjJMMzAuMTcgMTMuNDdMMzEuNTAgMTMuNDdMMzQuNzMgMjJMMzMuMTggMjJMMzIuNDkgMjAuMDFMMjkuMTggMjAuMDFMMjguNDkgMjJaTTMwLjgzIDE1LjI4TDI5LjYwIDE4LjgyTDMyLjA3IDE4LjgyTDMwLjgzIDE1LjI4Wk00MS4xNCAyMkwzOC42OSAyMkwzOC42OSAxMy40N0w0MS4yMSAxMy40N1E0Mi4zNCAxMy40NyA0My4yMSAxMy45N1E0NC4wOSAxNC40OCA0NC41NyAxNS40MFE0NS4wNSAxNi4zMyA0NS4wNSAxNy41Mkw0NS4wNSAxNy41Mkw0NS4wNSAxNy45NVE0NS4wNSAxOS4xNiA0NC41NyAyMC4wOFE0NC4wOCAyMS4wMCA0My4xOSAyMS41MFE0Mi4zMCAyMiA0MS4xNCAyMkw0MS4xNCAyMlpNNDAuMTcgMTQuNjZMNDAuMTcgMjAuODJMNDEuMTQgMjAuODJRNDIuMzAgMjAuODIgNDIuOTMgMjAuMDlRNDMuNTUgMTkuMzYgNDMuNTYgMTcuOTlMNDMuNTYgMTcuOTlMNDMuNTYgMTcuNTJRNDMuNTYgMTYuMTMgNDIuOTYgMTUuNDBRNDIuMzUgMTQuNjYgNDEuMjEgMTQuNjZMNDEuMjEgMTQuNjZMNDAuMTcgMTQuNjZaTTU1LjA5IDIyTDQ5LjUxIDIyTDQ5LjUxIDEzLjQ3TDU1LjA1IDEzLjQ3TDU1LjA1IDE0LjY2TDUxLjAwIDE0LjY2TDUxLjAwIDE3LjAyTDU0LjUwIDE3LjAyTDU0LjUwIDE4LjE5TDUxLjAwIDE4LjE5TDUxLjAwIDIwLjgyTDU1LjA5IDIwLjgyTDU1LjA5IDIyWk02Ni42NSAyMkw2NC42OCAxMy40N0w2Ni4xNSAxMy40N0w2Ny40NyAxOS44OEw2OS4xMCAxMy40N0w3MC4zNCAxMy40N0w3MS45NiAxOS44OUw3My4yNyAxMy40N0w3NC43NCAxMy40N0w3Mi43NyAyMkw3MS4zNSAyMkw2OS43MyAxNS43N0w2OC4wNyAyMkw2Ni42NSAyMlpNODAuMzggMjJMNzguOTAgMjJMNzguOTAgMTMuNDdMODAuMzggMTMuNDdMODAuMzggMjJaTTg2Ljg3IDE0LjY2TDg0LjIzIDE0LjY2TDg0LjIzIDEzLjQ3TDkxLjAwIDEzLjQ3TDkxLjAwIDE0LjY2TDg4LjM0IDE0LjY2TDg4LjM0IDIyTDg2Ljg3IDIyTDg2Ljg3IDE0LjY2Wk05Ni4yNCAyMkw5NC43NSAyMkw5NC43NSAxMy40N0w5Ni4yNCAxMy40N0w5Ni4yNCAxNy4wMkwxMDAuMDUgMTcuMDJMMTAwLjA1IDEzLjQ3TDEwMS41MyAxMy40N0wxMDEuNTMgMjJMMTAwLjA1IDIyTDEwMC4wNSAxOC4yMUw5Ni4yNCAxOC4yMUw5Ni4yNCAyMloiIGZpbGw9IiNGRkZGRkYiLz48cGF0aCBjbGFzcz0ic3ZnX190ZXh0IiBkPSJNMTI3LjA3IDE3LjgwTDEyNy4wNyAxNy44MFExMjcuMDcgMTYuNTUgMTI3LjY3IDE1LjU1UTEyOC4yOCAxNC41NiAxMjkuMzQgMTQuMDBRMTMwLjQwIDEzLjQzIDEzMS43MyAxMy40M0wxMzEuNzMgMTMuNDNRMTMzLjA2IDEzLjQzIDEzNC4xMyAxNC4wMFExMzUuMTkgMTQuNTYgMTM1LjgwIDE1LjU1UTEzNi40MCAxNi41NSAxMzYuNDAgMTcuODBMMTM2LjQwIDE3LjgwUTEzNi40MCAxOS4wNSAxMzUuODAgMjAuMDRRMTM1LjE5IDIxLjA0IDEzNC4xMyAyMS42MFExMzMuMDcgMjIuMTcgMTMxLjczIDIyLjE3TDEzMS43MyAyMi4xN1ExMzAuNDAgMjIuMTcgMTI5LjM0IDIxLjYwUTEyOC4yOCAyMS4wNCAxMjcuNjcgMjAuMDRRMTI3LjA3IDE5LjA1IDEyNy4wNyAxNy44MFpNMTI5LjQ3IDE3LjgwTDEyOS40NyAxNy44MFExMjkuNDcgMTguNTEgMTI5Ljc3IDE5LjA1UTEzMC4wNyAxOS42MCAxMzAuNTkgMTkuOTBRMTMxLjEwIDIwLjIwIDEzMS43MyAyMC4yMEwxMzEuNzMgMjAuMjBRMTMyLjM3IDIwLjIwIDEzMi44OSAxOS45MFExMzMuNDAgMTkuNjAgMTMzLjcwIDE5LjA1UTEzNC4wMCAxOC41MSAxMzQuMDAgMTcuODBMMTM0LjAwIDE3LjgwUTEzNC4wMCAxNy4wOSAxMzMuNzAgMTYuNTRRMTMzLjQwIDE2IDEzMi44OSAxNS43MFExMzIuMzcgMTUuNDAgMTMxLjczIDE1LjQwTDEzMS43MyAxNS40MFExMzEuMTAgMTUuNDAgMTMwLjU4IDE1LjcwUTEzMC4wNyAxNiAxMjkuNzcgMTYuNTRRMTI5LjQ3IDE3LjA5IDEyOS40NyAxNy44MFpNMTQwLjcwIDE3LjgwTDE0MC43MCAxNy44MFExNDAuNzAgMTYuNTQgMTQxLjMwIDE1LjU0UTE0MS45MCAxNC41NSAxNDIuOTUgMTMuOTlRMTQ0LjAwIDEzLjQzIDE0NS4zMiAxMy40M0wxNDUuMzIgMTMuNDNRMTQ2LjQ4IDEzLjQzIDE0Ny40MCAxMy44NFExNDguMzIgMTQuMjUgMTQ4Ljk0IDE1LjAyTDE0OC45NCAxNS4wMkwxNDcuNDMgMTYuMzlRMTQ2LjYxIDE1LjQwIDE0NS40NSAxNS40MEwxNDUuNDUgMTUuNDBRMTQ0Ljc2IDE1LjQwIDE0NC4yMyAxNS43MFExNDMuNjkgMTYgMTQzLjQwIDE2LjU0UTE0My4xMCAxNy4wOSAxNDMuMTAgMTcuODBMMTQzLjEwIDE3LjgwUTE0My4xMCAxOC41MSAxNDMuNDAgMTkuMDVRMTQzLjY5IDE5LjYwIDE0NC4yMyAxOS45MFExNDQuNzYgMjAuMjAgMTQ1LjQ1IDIwLjIwTDE0NS40NSAyMC4yMFExNDYuNjEgMjAuMjAgMTQ3LjQzIDE5LjIyTDE0Ny40MyAxOS4yMkwxNDguOTQgMjAuNThRMTQ4LjMzIDIxLjM1IDE0Ny40MCAyMS43NlExNDYuNDggMjIuMTcgMTQ1LjMyIDIyLjE3TDE0NS4zMiAyMi4xN1ExNDQuMDAgMjIuMTcgMTQyLjk1IDIxLjYxUTE0MS45MCAyMS4wNSAxNDEuMzAgMjAuMDVRMTQwLjcwIDE5LjA2IDE0MC43MCAxNy44MFpNMTU0Ljg5IDIyTDE1Mi40NiAyMkwxNTYuMTcgMTMuNjBMMTU4LjUyIDEzLjYwTDE2Mi4yMyAyMkwxNTkuNzcgMjJMMTU5LjEwIDIwLjM3TDE1NS41NSAyMC4zN0wxNTQuODkgMjJaTTE1Ny4zMyAxNS45M0wxNTYuMjQgMTguNjFMMTU4LjQxIDE4LjYxTDE1Ny4zMyAxNS45M1pNMTY4LjU4IDIyTDE2Ni4zOSAyMkwxNjYuMzkgMTMuNjBMMTY4LjM0IDEzLjYwTDE3MS4zMCAxOC40NUwxNzQuMTggMTMuNjBMMTc2LjEzIDEzLjYwTDE3Ni4xNSAyMkwxNzMuOTcgMjJMMTczLjk1IDE3LjU1TDE3MS43OSAyMS4xN0wxNzAuNzMgMjEuMTdMMTY4LjU4IDE3LjY3TDE2OC41OCAyMlpNMTg3LjcwIDIyTDE4MS4zMiAyMkwxODEuMzIgMTMuNjBMMTgzLjcwIDEzLjYwTDE4My43MCAyMC4xMUwxODcuNzAgMjAuMTFMMTg3LjcwIDIyWiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTI2LjMxIi8+PC9zdmc+" alt="made with ocaml">
</div>

<br />
<br />

# Table of contents

- [How do I install it?](#how-do-i-install-it)
- [How do I use it?](#how-do-i-use-it)
- [Credits](#credits)
- [Contributing](#contributing)

<br />

# How do I install it?

## Docker (recommended)

Use one of the official Docker images at https://hub.docker.com/u/osnap.

<br />

**NOTICE:** <br />
We do recommend using a Docker Container to run the tests, because snapshot tests are by nature pretty susceptible to the smallest changes in rendering. <br />
The biggest problem is, that Browsers render (mainly fonts and images) differently on different devices and operating systems. For the human eye, this is mostly not noticeable, but for an diffing algorithm, these changes are noticeable and will fail the test. <br />
So it is important to always run the tests in the same environment.

<br />
<br />

## npm / yarn

OSnap may be installed with yarn or npm using one of the following commands:

```bash
yarn add @space-labs/osnap --dev
```

or

```bash
npm install @space-labs/osnap --save-dev
```

<br />

# How do I use it?

Before you can run your first test suite, OSnap needs to be configured. To do this, you need at least two files. The global config file and one test file.

After you have created them you have to run `yarn osnap`, `npx osnap` or create a npm script running `osnap` with the optional [cli flags](https://ewert-online.github.io/OSnap/cli) available.

In in-depth documentation with configuration options and examples can be found at:

### **https://ewert-online.github.io/OSnap**

<br />

# Credits

**[ODiff](https://github.com/dmtrKovalenko/odiff):**
ODiff inspired the name of this library and is used as the underlying diffing algorithm.
Thank you for your work [@dmtrKovalenko](https://github.com/dmtrKovalenko)!

<br />

# Contributing

Contributions are always welcome. Here's how to set up the project locally.

**Install opam**

https://opam.ocaml.org/doc/Install.html

**Install dependencies**
```sh
make install
```

**Build the project**
```sh
make
```

# Some things we may want to add:

In decending order of priority (top ones are more important):

- [ ] **A built in static webserver**:
      The speed of the server used to serve the website being tested influences the speed of OSnap a lot. So we want to control that a bit more and provide a built in static web server. <br />
      This also makes it easier to run tests, as you don't have to explicitly wait for the server to be up and running before running osnap.
      <br /><br />
- [ ] **Listen for network requests**:
      Wait for specific network requests to finish, before taking the screenshot. For example: Wait for a failed login attempt to come back, to screenshot the error state
      <br /><br />
- [ ] **Wait for dom events**:
      Maybe we can find a way, to wait for specific events to be triggered on the page. For example: Wait for all animations on the page to complete before taking the screenshot.

<br />

### If you find a bug or think some feature is missing, feel free to submit an issue :)
